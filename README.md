# Tone matching of a subtractive synthesizer using genetic algorithm
There are two parts to this project :

1.To build a simple subtractive synthesizer (using an oscillator, filter, ADSR envelopes and an amplifier) for a single note (monophonic synthesizer). 

2.Use the genetic algorithm to regenerate the parameters of the synthesizer, thereby reproducing the reference note (from the synthesizer).
The purpose of using the genetic algorithm is to find an optimal set of parameters that are close match to the timbre of the original note from the synthesizer.

## Subtractive synthesizer
To start a sound rich in harmonics of a certain fundamental frequency is generated by the oscillator. A filter ( in this case a second order low pass filter) 
moulds sound by cutting out or subtracting the higher harmonics of the sound generated by the oscillator. The ADSR envelope ( Attack, Decay, Sustain and Release)
helps in modulating the sound by controlling the cut off frequency of the filter. This modulated sound from the filter is then adjusted in gain/volume with the
help of another ADSR envelope. In this case the ADSR envelope controls the amplitude of the sound. 

![image](https://user-images.githubusercontent.com/85062886/120111797-a5ae5e80-c173-11eb-817e-9a58b6d8070c.png)

In total, the synthesizer has 11 parameters, a brief explanation of these parameters is given below :
![image](https://user-images.githubusercontent.com/85062886/120112964-882fc380-c178-11eb-8836-8b316b32eef4.png)


## Genetic Algorithm
The genetic algorithm (GA) tries to find optimal values of the 11 parameters of the synthesizer so that the sound generated from these parameters are close to the
reference sound sample perceptually. The algorithm is population based and hence at each iteration generates a population of individuals. Each individual is a vector
of 11 parameters. The algorithm comes to a halt when the improvement in fitness is negligibly small. This implementation is carried out in MATLAB. 
Here, a lower fitness values is considered better. (This could be the opposite in other optimization algorithms or the type of implementation).
The options in the genetic algorithm can be changed to observe how the results vary with different configurations :
1. By varying the amount of crossover and mutation
2. By changing the number of elite children in a population.
3. The population size 
4. The number of generations

The cost function used to minimize the loss is a simple Root mean square (RMS) error formula. RMS error value is calculated using the MFCC (Mel Frequency Cepstrum
Coefficients) of both the Reference parameters and optimal parameters found by the GA. The aim is to minimize the difference between the two sets of parameters so
that optimal parameters are a close match to the reference.

More information on how to use the genetic algorithm can be found at the MATLAB documentaion:
1. How the genetic algorithm works : https://de.mathworks.com/help/gads/how-the-genetic-algorithm-works.html
2. ga : https://de.mathworks.com/help/gads/ga.html
3. Vary mutation and crossover : https://de.mathworks.com/help/gads/vary-mutation-and-crossover.html
4. Custom output function for genetic algorithm : https://de.mathworks.com/help/gads/custom-output-function-for-genetic-algorithm.html

The algorithm was tested different waveforms of the synthesizer such as sawtooth, rectangle and triangle. The results indicate that the genetic algorithm can
find close to optimal parameters for most waveforms and configuartions. The sound generated from the GA is also perceptually similar to the reference sound.

## Sound samples

Here are some sound samples and their corresponding sound sample found by the GA. 
1. sawtooth reference : 

https://user-images.githubusercontent.com/85062886/120113268-fc1e9b80-c179-11eb-8227-b97c08601b1e.mp4


2. sawtooth	GA sample

https://user-images.githubusercontent.com/85062886/120113260-f1fc9d00-c179-11eb-8481-3cd80a41cb1b.mp4











